{% extends 'nflpix/base.html' %}

{% block title %}League Standings - NFL Pick'em{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-neon">
            {% if league %}
                {{ league.name }} Standings
            {% else %}
                Overall Standings
            {% endif %}
        </h1>
        
        {% if user.leagues.exists %}
        <div class="flex gap-4">
            <a href="{% url 'standings' %}" class="btn-neon {% if is_overall %}active{% endif %}">
                Overall
            </a>
            {% for user_league in user.leagues.all %}
            <a href="{% url 'standings' %}?league={{ user_league.id }}" 
               class="btn-neon {% if league.id == user_league.id %}active{% endif %}">
                {{ user_league.name }}
            </a>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="bg-gray-800 rounded-lg shadow-lg overflow-hidden">
        <table class="min-w-full">
            <thead>
                <tr class="bg-gray-700">
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        Rank
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        User
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        Points
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        Correct
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        Total
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                        Percentage
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-600">
                {% for standing in standings %}
                <tr class="{% if standing.username == user.username %}bg-gray-700{% endif %}">
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        {{ forloop.counter }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-neon">
                        {{ standing.username }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        {{ standing.points }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        {{ standing.correct }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        {{ standing.total }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        {{ standing.percentage|floatformat:1 }}%
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="px-6 py-4 text-center text-gray-400">
                        No picks have been made yet.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
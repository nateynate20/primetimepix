{% extends 'nflpix/base.html' %}

{% block title %}NFL Scores - NFL Pick'em{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-neon mb-6">NFL Scores</h1>

    {% if games %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for game in games %}
        <div class="bg-gray-800 rounded-lg p-6 shadow-lg relative {% if game.is_primetime %}ring-4 ring-yellow-400{% endif %}">
            
            <!-- Status -->
            {% if game.status == 'final' %}
                <span class="absolute top-2 left-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full">FINAL</span>
            {% elif game.status == 'in_progress' %}
                <span role="status" class="absolute top-2 left-2 bg-green-400 text-black text-xs font-bold px-2 py-1 rounded-full animate-pulse">LIVE</span>
            {% endif %}

            <!-- Primetime label -->
            {% if game.is_primetime %}
                <span class="absolute top-2 right-2 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full">{{ game.primetime_type }}</span>
            {% endif %}

            <!-- Teams -->
            <div class="flex justify-between items-center mb-4 {% if game.status != 'scheduled' %}mt-6{% endif %}">
                <div class="flex items-center space-x-2">
                    <img src="{{ game.away_logo|default:'/static/images/default_team.png' }}" alt="{{ game.away_team }}" class="w-8 h-8">
                    <span class="text-xl font-semibold {% if game.away_is_winner %}text-green-400{% endif %}">{{ game.away_team }}</span>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-xl font-semibold {% if game.home_is_winner %}text-green-400{% endif %}">{{ game.home_team }}</span>
                    <img src="{{ game.home_logo|default:'/static/images/default_team.png' }}" alt="{{ game.home_team }}" class="w-8 h-8">
                </div>
            </div>

            <!-- Time -->
            <div class="text-gray-400 text-sm mb-4">
                Week {{ game.week }} â€“
                {% if game.display_time_et %}
                    <time datetime="{{ game.start_time|date:'c' }}">
                        {{ game.display_time_et|date:"l, F j, g:i A" }} ET
                    </time>
                {% else %}
                    Time TBD
                {% endif %}
            </div>

            <!-- Scores -->
            <div class="text-white font-bold text-lg bg-gray-700 rounded-lg p-3">
                {% if game.has_score %}
                    <div class="flex justify-between">
                        <span class="{% if game.away_is_winner %}text-green-400{% endif %}">{{ game.away_team }}: {{ game.away_score }}</span>
                        <span class="{% if game.home_is_winner %}text-green-400{% endif %}">{{ game.home_team }}: {{ game.home_score }}</span>
                    </div>
                {% else %}
                    Scores TBD
                {% endif %}
            </div>

        </div>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if games.has_other_pages %}
        <div class="flex justify-center mt-6 space-x-2 flex-wrap">
            {% if games.has_previous %}
                <a href="?page={{ games.previous_page_number }}" class="px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600">Previous</a>
            {% endif %}
            {% for num in games.paginator.page_range %}
                {% if num == games.number %}
                    <span class="px-4 py-2 bg-neon text-black rounded font-bold">{{ num }}</span>
                {% else %}
                    <a href="?page={{ num }}" class="px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600">{{ num }}</a>
                {% endif %}
            {% endfor %}
            {% if games.has_next %}
                <a href="?page={{ games.next_page_number }}" class="px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600">Next</a>
            {% endif %}
        </div>
    {% endif %}

    {% else %}
        <p class="text-gray-400">No games scheduled yet.</p>
    {% endif %}
</div>
{% endblock %}
